<html>
	<head>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="three.min.js"></script>
		<script src="OrbitControls.js"></script>
		<script src="mountain.js"></script>
		<script src="solluna.js"></script>
		<script>
			const width = 700; const length = 700;

			var renderer = new THREE.WebGLRenderer({antialias:true});
			renderer.setSize( window.innerWidth, window.innerHeight );
			renderer.setAnimationLoop( drawFrame );
			document.body.appendChild( renderer.domElement );

			var scene = new THREE.Scene();
			scene.background = new THREE.Color( 0x101010 );
			//scene.fog = new THREE.Fog( 0x101010, 10, 100 );

			var aspect = window.innerWidth/window.innerHeight;
			var camera = new THREE.PerspectiveCamera( 100, aspect );
			camera.position.set( 450, 950, 900 );

			var controls = new THREE.OrbitControls(camera, renderer.domElement);
			controls.enableDamping = true;
			controls.dampingFactor = 0.1;
			controls.maxPolarAngle = Math.PI / 2;
			controls.rotateSpeed = 0.2;
			
			var base = new THREE.Mesh(
				new THREE.PlaneGeometry( width, length ),
				new THREE.MeshPhongMaterial( {color: 0x202030, shininess: 70} )
			);
			base.lookAt( new THREE.Vector3( 0, 1, 0 ) );
			scene.add( base );
			
			createMountain();
			createSolluna();
			

			function drawFrame()
			{
				controls.update();
		
				renderer.render( scene, camera );
			}

			// // // // // // // // // //

			function createMountain() 
			{
				var mountain_1 = createMountainTerrain(width / 5, length * 1.4);
        		mountain_1.position.set(width / 2 + width / 10, 0, 0);
       			scene.add(mountain_1);

				var mountain_2 = createMountainTerrain(width / 5, length * 1.4);
        		mountain_2.position.set(- width / 2 - width / 10, 0, 0);
       			scene.add(mountain_2);

				var mountain_3 = createMountainTerrain(width * 1.4, length / 5);
        		mountain_3.position.set(0, 0, length / 2 + length / 10);
       			scene.add(mountain_3);

				var mountain_4 = createMountainTerrain(width * 1.4, length / 5);
        		mountain_4.position.set(0, 0, - length / 2 - length / 10);
       			scene.add(mountain_4);
			}

			function createSolluna()
			{
				var directionalLight;

				var sun = createRotatingSphere('sun', 100, 0, 900, 30);
				directionalLight = new THREE.DirectionalLight(0xffaf00, 0.3);
				sun.add(directionalLight);
				directionalLight = new THREE.DirectionalLight(0xffffff, 1); 
				sun.add(directionalLight);
				scene.add(sun); 

				moon = createRotatingSphere('moon', 100, 0, 900, 30);
				directionalLight = new THREE.DirectionalLight(0x003f70, 0.3);
				moon.add(directionalLight);
				directionalLight = new THREE.DirectionalLight(0xffffff, 1); 
				moon.add(directionalLight);
				scene.add(moon);

				directionalLight.castShadow = true;
			}
		</script>
	</body>
</html>